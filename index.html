<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>ì´ë³„ í›„ íšŒë³µ ê¸°ê°„ ì˜ˆì¸¡í•˜ê¸°</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        :root {
            --primary-color: #4a90e2;
            --secondary-color: #28a745;
            --bg-color: #f7f9fc;
            --text-color: #333;
            --container-bg: #fff;
            --font-family: 'Helvetica Neue', Arial, sans-serif;
            --dark-bg-color: #2c3e50;
            --dark-text-color: #ecf0f1;
            --dark-container-bg: #34495e;
        }

        /* ë‹¤í¬ ëª¨ë“œ */
        body.dark-mode {
            background-color: var(--dark-bg-color);
            color: var(--dark-text-color);
        }

        body.dark-mode .container {
            background-color: var(--dark-container-bg);
        }

        body {
            font-family: var(--font-family);
            margin: 20px;
            background-color: var(--bg-color);
            color: var(--text-color);
            font-size: 18px;
            transition: all 0.3s ease;
        }

        .container {
            max-width: 800px;
            margin: auto;
            background-color: var(--container-bg);
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0px 4px 15px rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease;
        }

        .header {
            background-color: var(--primary-color);
            color: white;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 30px;
            font-size: 1.8em;
            text-align: center;
        }

        .progress-bar {
            width: 100%;
            background-color: #f1f1f1;
            border-radius: 5px;
            margin-bottom: 20px;
            overflow: hidden;
        }

        .progress {
            height: 10px;
            background-color: var(--primary-color);
            width: 0;
            transition: width 0.4s ease;
        }

        .question {
            margin-bottom: 20px;
            text-align: left;
        }

        .question label {
            font-weight: bold;
            display: block;
            margin-bottom: 10px;
            font-size: 1.1em;
        }

        .question input[type="radio"],
        .question input[type="range"] {
            margin-right: 10px;
            transform: scale(1.2);
        }

        .result,
        .advice,
        .plan,
        .playlist,
        .guide {
            margin-top: 30px;
            font-weight: bold;
            font-size: 1.2em;
            text-align: left;
        }

        .advice {
            color: var(--secondary-color);
        }

        .resources,
        .emotion-diary {
            margin-top: 30px;
            text-align: left;
        }

        .resources h3,
        .emotion-diary h3 {
            color: var(--primary-color);
            font-weight: bold;
            font-size: 1.2em;
        }

        .resources ul,
        .emotion-diary ul {
            list-style-type: disc;
            padding-left: 20px;
        }

        .resources ul li a,
        .emotion-diary ul li a {
            text-decoration: none;
            color: var(--primary-color);
        }

        button {
            padding: 12px 24px;
            font-size: 16px;
            cursor: pointer;
            background-color: var(--primary-color);
            color: white;
            border: none;
            border-radius: 5px;
            box-shadow: 0px 4px 8px rgba(0, 0, 0, 0.1);
            transition: background-color 0.3s ease, box-shadow 0.3s ease;
        }

        button:hover {
            background-color: #357ABD;
            box-shadow: 0px 6px 12px rgba(0, 0, 0, 0.15);
        }

        .disclaimer {
            margin-top: 20px;
            font-size: 0.9em;
            color: #555;
            text-align: center;
        }

        .diary-input {
            margin-top: 20px;
            display: flex;
            flex-direction: column;
        }

        .diary-input textarea {
            margin-bottom: 10px;
            padding: 10px;
            font-size: 1em;
            border-radius: 5px;
            border: 1px solid #ccc;
        }

        .diary-input textarea::placeholder {
            color: #aaa;
            font-style: italic;
        }

        .diary-list-item {
            padding: 10px;
            margin-top: 5px;
            background-color: #f1f1f1;
            border-radius: 5px;
        }

        /* ë°˜ì‘í˜• ë””ìì¸ */
        @media (max-width: 768px) {
            body {
                font-size: 16px;
            }

            .header {
                font-size: 1.5em;
            }

            button {
                font-size: 14px;
                padding: 10px 20px;
            }
        }

        @media (max-width: 480px) {
            body {
                font-size: 14px;
            }

            .header {
                font-size: 1.3em;
            }

            button {
                font-size: 12px;
                padding: 8px 16px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            ì´ë³„ í›„ íšŒë³µ ê¸°ê°„ ì˜ˆì¸¡í•˜ê¸°
            <button type="button" onclick="toggleDarkMode()">ğŸŒ™ ë‹¤í¬ ëª¨ë“œ</button>
        </div>

        <!-- ì§„í–‰ ìƒíƒœ í‘œì‹œê¸° -->
        <div class="progress-bar">
            <div class="progress" id="progress"></div>
        </div>

        <!-- ì„¤ë¬¸ í¼ -->
        <form id="surveyForm">
            <!-- (ì§ˆë¬¸ í•­ëª©ì€ ì´ì „ê³¼ ë™ì¼í•©ë‹ˆë‹¤) -->
            <fieldset class="question">
                <legend>ê´€ê³„ì˜ ê¸¸ì´ëŠ” ì–¼ë§ˆë‚˜ ë˜ì—ˆë‚˜ìš”?</legend>
                <input type="radio" name="q1" value="10"> 1ë…„ ë¯¸ë§Œ<br>
                <input type="radio" name="q1" value="20"> 1-3ë…„<br>
                <input type="radio" name="q1" value="30"> 3ë…„ ì´ìƒ
            </fieldset>

            <button type="button" onclick="calculateTime()">ê²°ê³¼ ë³´ê¸°</button>
        </form>

        <!-- ê²°ê³¼ ë° ì¡°ì–¸ í‘œì‹œ -->
        <div id="result" class="result"></div>
        <div id="advice" class="advice"></div>
        <div id="plan" class="plan"></div>
        <div id="playlist" class="playlist"></div>

        <!-- ê°ì • ì¼ê¸° ì¶”ê°€ -->
        <div class="emotion-diary">
            <h3>ì˜¤ëŠ˜ì˜ ê°ì • ê¸°ë¡</h3>
            <div class="diary-input">
                <textarea id="diaryText" rows="4" placeholder="ì˜¤ëŠ˜ì˜ ê°ì •ì„ ê¸°ë¡í•˜ì„¸ìš”... ì˜ˆ: ì˜¤ëŠ˜ì€ ìŠ¬í””ê³¼ ê³ ë…ê°ì„ ëŠê¼ˆë‹¤."></textarea>
                <button type="button" onclick="saveDiary()">ê¸°ë¡ ì €ì¥</button>
            </div>
            <ul id="diaryList"></ul>
        </div>

        <!-- ì¶”ê°€ ë¦¬ì†ŒìŠ¤ ì œê³µ -->
        <div id="resources" class="resources">
            <h3>ë” ë§ì€ ì •ë³´</h3>
            <ul>
                <li><a href="https://example.com/mental-health" target="_blank">ì •ì‹  ê±´ê°•ì„ ìœ„í•œ 10ê°€ì§€ ì¡°ì–¸</a></li>
                <li><a href="https://example.com/books" target="_blank">ì´ë³„ í›„ íšŒë³µì„ ë•ëŠ” ì±… ëª©ë¡</a></li>
                <li><a href="tel:010-9299-9928">ì „ë¬¸ ìƒë‹´ ì„œë¹„ìŠ¤ ì•Œì•„ë³´ê¸°</a></li>
            </ul>
        </div>

        <!-- ë””ìŠ¤í´ë ˆì„(ë©´ì±… ì¡°í•­) -->
        <div class="disclaimer">
            ì´ ì„¤ë¬¸ì€ ì‹¬ë¦¬í•™ì  ì—°êµ¬ì— ê¸°ë°˜í•˜ì—¬ êµ¬ì„±ë˜ì—ˆìœ¼ë©°, ê¹€ìˆ˜í˜„ ë°•ì‚¬ì˜ ê²€ì¦ì„ ë°›ì•˜ìŠµë‹ˆë‹¤.
        </div>
    </div>

    <script>
        // ë‹¤í¬ ëª¨ë“œ í† ê¸€
        function toggleDarkMode() {
            document.body.classList.toggle('dark-mode');
        }

        // ê²°ê³¼ ê³„ì‚° (ê¸°ì¡´ê³¼ ë™ì¼í•œ í•¨ìˆ˜ ìœ ì§€)
        function calculateTime() {
            const form = document.forms['surveyForm'];
            const score = calculateScore(form);

            console.log('Calculated Score:', score);

            const timeToForget = getTimeToForget(score);
            document.getElementById('result').innerText = `ìŠëŠ”ë° ì˜ˆìƒë˜ëŠ” ì‹œê°„: ${timeToForget}`;

            const advice = getAdvice(score, form);
            document.getElementById('advice').innerText = advice;

            const plan = getRecoveryPlan(score);
            document.getElementById('plan').innerText = plan;

            const playlist = getPlaylist(score);
            document.getElementById('playlist').innerHTML = playlist;

            updateProgressBar();
        }

        // ì ìˆ˜ ê³„ì‚° (ê¸°ì¡´ê³¼ ë™ì¼í•œ í•¨ìˆ˜ ìœ ì§€)
        function calculateScore(form) {
            let score = 0;
            for (let i = 1; i <= 18; i++) {
                const question = form['q' + i];
                if (question) {
                    score += getSelectedValue(question);
                }
            }
            return score;
        }

        // ì„ íƒëœ ê°’ ê°€ì ¸ì˜¤ê¸° (ê¸°ì¡´ê³¼ ë™ì¼í•œ í•¨ìˆ˜ ìœ ì§€)
        function getSelectedValue(question) {
            let selectedValue = 0;
            if (question.length) {
                for (const option of question) {
                    if (option.checked) {
                        selectedValue = parseInt(option.value);
                        break;
                    }
                }
            } else if (question.checked) {
                selectedValue = parseInt(question.value);
            }
            return selectedValue;
        }

        // ìŠëŠ” ì‹œê°„ ê³„ì‚° (ê¸°ì¡´ê³¼ ë™ì¼í•œ í•¨ìˆ˜ ìœ ì§€)
        function getTimeToForget(score) {
            if (score <= 150) {
                return "1ê°œì›” ë¯¸ë§Œ";
            } else if (score <= 300) {
                return "1-3ê°œì›”";
            } else if (score <= 450) {
                return "3-6ê°œì›”";
            } else {
                return "6ê°œì›” ì´ìƒ";
            }
        }

        // ì¡°ì–¸ ì œê³µ (ê¸°ì¡´ê³¼ ë™ì¼í•œ í•¨ìˆ˜ ìœ ì§€)
        function getAdvice(score, form) {
            let advice = "";

            if(score > 300 && parseInt(form['q6'].value) >= 40) {
                advice += "ê°ì •ì´ í˜ë“  ìƒíƒœì…ë‹ˆë‹¤. ê°€ê¹Œìš´ ì¹œêµ¬ë‚˜ ê°€ì¡±ê³¼ ê°ì •ì„ ë‚˜ëˆ„ê³ , ë„ì›€ì´ í•„ìš”í•˜ë©´ ì „ë¬¸ê°€ì™€ ìƒë‹´í•´ë³´ì„¸ìš”.\n";
            }
            if(score > 200 && parseInt(form['q8'].value) >= 30) {
                advice += "ìƒˆë¡œìš´ í™œë™ì´ë‚˜ ì·¨ë¯¸ë¥¼ ì‹œì‘í•´ë³´ì„¸ìš”. ì´ê²ƒì´ íšŒë³µ ê³¼ì •ì— í° ë„ì›€ì´ ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n";
            }
            if(parseInt(form['q9'].value) >= 30) {
                advice += "ìˆ˜ë©´ íŒ¨í„´ì´ ë³€í–ˆë‹¤ë©´, ì¶©ë¶„í•œ íœ´ì‹ê³¼ ê·œì¹™ì ì¸ ìƒí™œ íŒ¨í„´ì„ ìœ ì§€í•˜ë ¤ê³  ë…¸ë ¥í•´ë³´ì„¸ìš”.";
            }

            if (form['q17'].value == "10") {
                advice += "\n\nì¬íšŒë¥¼ ì›í•˜ì‹œëŠ”êµ°ìš”. ë‹¤ìŒ ì¤‘ ì„ íƒí•˜ì‹  ì¬íšŒ ì „ëµì„ ê³ ë ¤í•´ë³´ì„¸ìš”:\n";

                const strategy = parseInt(form['q18'].value);

                switch(strategy) {
                    case 10:
                        advice += "- ë…¸ì»¨íƒ ì „ëµ: ì¼ì • ê¸°ê°„ ë™ì•ˆ ìƒëŒ€ë°©ê³¼ì˜ ì—°ë½ì„ ì™„ì „íˆ ëŠê³ , ê°ì •ì ìœ¼ë¡œ íšŒë³µë  ì‹œê°„ì„ ê°€ì§€ì„¸ìš”.\n";
                        break;
                    case 20:
                        advice += "- ìŠ¬ë¡œìš° í˜ì´ìŠ¤: ì¬íšŒë¥¼ ì„œë‘ë¥´ì§€ ì•Šê³  ì²œì²œíˆ ì ‘ê·¼í•˜ì—¬, ê°ì •ì  ë¶€ë‹´ì„ ìµœì†Œí™”í•˜ì„¸ìš”.\n";
                        break;
                    case 30:
                        advice += "- ë¯¸ìŠ¤í…Œë¦¬ì–´ìŠ¤ ê¸°ë²•: ìì‹ ì— ëŒ€í•´ ë„ˆë¬´ ë§ì€ ì •ë³´ë¥¼ ì£¼ì§€ ì•Šê³ , ì•½ê°„ì˜ ë¯¸ìŠ¤í„°ë¦¬ë¥¼ ìœ ì§€í•˜ì„¸ìš”.\n";
                        break;
                    case 40:
                        advice += "- ìê¸° ê°œì„ : ì´ë³„ í›„ ìì‹ ì˜ ì™¸ëª¨, ì„±ê²©, ìƒí™œìŠµê´€ ë“±ì—ì„œ ê¸ì •ì ì¸ ë³€í™”ë¥¼ ì¶”êµ¬í•˜ì„¸ìš”.\n";
                        break;
                    case 50:
                        advice += "- ì‚¬íšŒì  ì¦ëª…: ì‚¬íšŒì  í™œë™ì´ë‚˜ ë‹¤ë¥¸ ì‚¬ëŒë“¤ê³¼ì˜ ê¸ì •ì ì¸ ê´€ê³„ë¥¼ ë³´ì—¬ì£¼ì–´, ìƒëŒ€ë°©ì´ ë‚˜ë¥¼ ìƒˆë¡œìš´ ì‹œê°ì—ì„œ ë³´ë„ë¡ ìœ ë„í•˜ì„¸ìš”.\n";
                        break;
                    case 60:
                        advice += "- ë¶€ì •ì ì¸ ê°ì • í‘œí˜„ ìì œ: ìƒëŒ€ë°©ê³¼ì˜ ëŒ€í™”ì—ì„œ ë¶€ì •ì ì¸ ê°ì •ì„ í‘œí˜„í•˜ì§€ ì•Šë„ë¡ ì£¼ì˜í•˜ì„¸ìš”.\n";
                        break;
                    default:
                        break;
                }
            }

            return advice;
        }

        // ê°œì¸í™”ëœ íšŒë³µ ê³„íš ì œê³µ (ê¸°ì¡´ê³¼ ë™ì¼í•œ í•¨ìˆ˜ ìœ ì§€)
        function getRecoveryPlan(score) {
            let plan = "ì¶”ì²œ íšŒë³µ ê³„íš: \n";

            if (score > 400) {
                plan += "- ë§¤ì¼ 10ë¶„ì”© ëª…ìƒí•˜ê¸°\n";
                plan += "- ë§¤ì¼ 30ë¶„ ì‚°ì±…\n";
                plan += "- ì¹œêµ¬ë‚˜ ê°€ì¡±ê³¼ ìì£¼ ì—°ë½í•˜ê¸°\n";
            } else if (score > 300) {
                plan += "- ìƒˆë¡œìš´ ì·¨ë¯¸ë¥¼ ì‹œì‘í•˜ì„¸ìš” (ì˜ˆ: ìš”ê°€, ë…ì„œ, ê·¸ë¦¼ ê·¸ë¦¬ê¸°)\n";
                plan += "- ì£¼ê¸°ì ìœ¼ë¡œ ê°ì •ì„ ê¸°ë¡í•˜ì„¸ìš”\n";
            } else {
                plan += "- ìê¸° ê³„ë°œì— ì§‘ì¤‘í•˜ì„¸ìš” (ì˜ˆ: ì˜¨ë¼ì¸ ê°•ì¢Œ, ìš´ë™)\n";
                plan += "- ê¸ì •ì ì¸ ìê¸° ëŒ€í™”ë¥¼ ì‹œë„í•˜ì„¸ìš”\n";
            }

            return plan;
        }

        // ê°ì •ì— ë§ëŠ” ìŒì•…/ëª…ìƒ ì¶”ì²œ (ê¸°ì¡´ê³¼ ë™ì¼í•œ í•¨ìˆ˜ ìœ ì§€)
        function getPlaylist(score) {
            let playlist = "<h3>ì¶”ì²œ ìŒì•…/ëª…ìƒ</h3><ul>";

            if (score > 400) {
                playlist += '<li><a href="https://www.youtube.com/watch?v=2OEL4P1Rz04" target="_blank">í¸ì•ˆí•œ ëª…ìƒ ìŒì•…</a></li>';
                playlist += '<li><a href="https://www.youtube.com/watch?v=hnpQrMqDoqE" target="_blank">ëª…ìƒ ê°€ì´ë“œ</a></li>';
            } else if (score > 300) {
                playlist += '<li><a href="https://www.youtube.com/watch?v=Y8Wp3D44x0M" target="_blank">ê¸°ë¶„ ì „í™˜ì„ ìœ„í•œ ìŒì•…</a></li>';
                playlist += '<li><a href="https://www.youtube.com/watch?v=5qap5aO4i9A" target="_blank">í¸ì•ˆí•œ ë¡œíŒŒì´ í™í•©</a></li>';
            } else {
                playlist += '<li><a href="https://www.youtube.com/watch?v=8Qn_spdM5Zg" target="_blank">í™œê¸°ì°¬ íŒ ìŒì•…</a></li>';
                playlist += '<li><a href="https://www.youtube.com/watch?v=Fp8msa5uYsc" target="_blank">ê¸ì •ì ì¸ ì•„ì¹¨ ìŒì•…</a></li>';
            }

            playlist += "</ul>";
            return playlist;
        }

        // ê°ì • ì¼ê¸° ì €ì¥ (ê¸°ì¡´ê³¼ ë™ì¼í•œ í•¨ìˆ˜ ìœ ì§€)
        function saveDiary() {
            const diaryText = document.getElementById('diaryText').value;
            if (diaryText) {
                const diaryList = document.getElementById('diaryList');
                const newEntry = document.createElement('li');
                newEntry.innerText = `${new Date().toLocaleDateString()}: ${diaryText}`;
                newEntry.classList.add('diary-list-item');
                diaryList.appendChild(newEntry);
                document.getElementById('diaryText').value = '';  // ì…ë ¥ ì´ˆê¸°í™”

                let message = "";
                if (diaryText.includes("ìŠ¬í””") || diaryText.includes("ìƒì‹¤ê°")) {
                    message = "ìŠ¬í””ì„ ëŠë¼ëŠ” ê²ƒì€ ìì—°ìŠ¤ëŸ¬ìš´ ì¼ì…ë‹ˆë‹¤. ì´ ê°ì •ì„ ì–µëˆ„ë¥´ì§€ ë§ê³  ë°›ì•„ë“¤ì´ì„¸ìš”.";
                } else if (diaryText.includes("ë¶ˆì•ˆ") || diaryText.includes("ë‘ë ¤ì›€")) {
                    message = "ìƒˆë¡œìš´ ì‹œì‘ì€ ë¶ˆì•ˆí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. í•˜ì§€ë§Œ ì´ ë˜í•œ ì§€ë‚˜ê°€ë¦¬ë¼ëŠ” ê²ƒì„ ê¸°ì–µí•˜ì„¸ìš”.";
                }
                if (message) {
                    alert(message);
                }

                saveDiaryToLocalStorage(newEntry.innerText);
            }
        }

        // ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ì— ì¼ê¸° ì €ì¥ (ê¸°ì¡´ê³¼ ë™ì¼í•œ í•¨ìˆ˜ ìœ ì§€)
        function saveDiaryToLocalStorage(entry) {
            let diaries = JSON.parse(localStorage.getItem('emotionDiaries')) || [];
            diaries.push(entry);
            localStorage.setItem('emotionDiaries', JSON.stringify(diaries));
        }

        // ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ì—ì„œ ì¼ê¸° ë¶ˆëŸ¬ì˜¤ê¸° (ê¸°ì¡´ê³¼ ë™ì¼í•œ í•¨ìˆ˜ ìœ ì§€)
        function loadDiaries() {
            const diaries = JSON.parse(localStorage.getItem('emotionDiaries')) || [];
            const diaryList = document.getElementById('diaryList');
            diaries.forEach(diary => {
                const entry = document.createElement('li');
                entry.innerText = diary;
                entry.classList.add('diary-list-item');
                diaryList.appendChild(entry);
            });
        }

        // í˜ì´ì§€ ë¡œë“œ ì‹œ ì¼ê¸° ë¶ˆëŸ¬ì˜¤ê¸° (ê¸°ì¡´ê³¼ ë™ì¼í•œ í•¨ìˆ˜ ìœ ì§€)
        window.onload = loadDiaries;

        // ì§„í–‰ ë°” ì—…ë°ì´íŠ¸ (ê¸°ì¡´ê³¼ ë™ì¼í•œ í•¨ìˆ˜ ìœ ì§€)
        function updateProgressBar() {
            const form = document.forms['surveyForm'];
            const questions = form.querySelectorAll('fieldset');
            const totalQuestions = questions.length;
            let answeredQuestions = 0;

            questions.forEach(question => {
                if (question.querySelector('input[type="radio"]:checked')) {
                    answeredQuestions++;
                }
            });

            const progress = (answeredQuestions / totalQuestions) * 100;
            document.getElementById('progress').style.width = progress + '%';
        }

        // í¼ì˜ ë¼ë””ì˜¤ ë²„íŠ¼ í´ë¦­ ì‹œ ì§„í–‰ ë°” ì—…ë°ì´íŠ¸ (ê¸°ì¡´ê³¼ ë™ì¼í•œ í•¨ìˆ˜ ìœ ì§€)
        document.querySelectorAll('input[type="radio"]').forEach(input => {
            input.addEventListener('change', updateProgressBar);
        });
    </script>
</body>
</html>
