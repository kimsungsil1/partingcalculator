<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>이별 후 회복 기간 예측하기</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        :root {
            --primary-color: #4a90e2;
            --secondary-color: #28a745;
            --bg-color: #f7f9fc;
            --text-color: #333;
            --container-bg: #fff;
            --font-family: 'Helvetica Neue', Arial, sans-serif;
            --dark-bg-color: #2c3e50;
            --dark-text-color: #ecf0f1;
            --dark-container-bg: #34495e;
        }

        /* 다크 모드 */
        body.dark-mode {
            background-color: var(--dark-bg-color);
            color: var(--dark-text-color);
        }

        body.dark-mode .container {
            background-color: var(--dark-container-bg);
        }

        body {
            font-family: var(--font-family);
            margin: 20px;
            background-color: var(--bg-color);
            color: var(--text-color);
            font-size: 18px;
            transition: all 0.3s ease;
        }

        .container {
            max-width: 800px;
            margin: auto;
            background-color: var(--container-bg);
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0px 4px 15px rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease;
        }

        .header {
            background-color: var(--primary-color);
            color: white;
            padding: 15px 20px;
            border-radius: 10px;
            margin-bottom: 30px;
            font-size: 1.5em;
            text-align: center;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .dark-mode-toggle {
            background: transparent;
            border: none;
            font-size: 1em;
            cursor: pointer;
            color: white;
            outline: none;
        }

        .progress-bar {
            width: 100%;
            background-color: #f1f1f1;
            border-radius: 5px;
            margin-bottom: 20px;
            overflow: hidden;
        }

        .progress {
            height: 10px;
            background-color: var(--primary-color);
            width: 0;
            transition: width 0.4s ease;
        }

        .question {
            display: none;
            margin-bottom: 20px;
            text-align: left;
        }

        .question.active {
            display: block;
        }

        .question label {
            font-weight: bold;
            display: block;
            margin-bottom: 10px;
            font-size: 1.1em;
        }

        .question input[type="radio"], .question input[type="checkbox"] {
            margin-right: 10px;
            transform: scale(1.2);
        }

        .result,
        .advice,
        .plan,
        .playlist,
        .guide {
            margin-top: 30px;
            font-weight: bold;
            font-size: 1.2em;
            text-align: left;
        }

        .advice {
            color: var(--secondary-color);
        }

        .resources,
        .emotion-diary {
            margin-top: 30px;
            text-align: left;
        }

        .resources h3,
        .emotion-diary h3 {
            color: var(--primary-color);
            font-weight: bold;
            font-size: 1.2em;
        }

        .resources ul,
        .emotion-diary ul {
            list-style-type: disc;
            padding-left: 20px;
        }

        .resources ul li a,
        .emotion-diary ul li a {
            text-decoration: none;
            color: var(--primary-color);
        }

        button {
            padding: 10px 20px;
            font-size: 16px;
            cursor: pointer;
            background-color: var(--primary-color);
            color: white;
            border: none;
            border-radius: 5px;
            box-shadow: 0px 4px 8px rgba(0, 0, 0, 0.1);
            transition: background-color 0.3s ease, box-shadow 0.3s ease;
            margin-top: 10px;
        }

        button:hover {
            background-color: #357ABD;
            box-shadow: 0px 6px 12px rgba(0, 0, 0, 0.15);
        }

        .disclaimer {
            margin-top: 20px;
            font-size: 0.9em;
            color: #555;
            text-align: center;
        }

        .diary-input {
            margin-top: 20px;
            display: flex;
            flex-direction: column;
        }

        .diary-input textarea {
            margin-bottom: 10px;
            padding: 10px;
            font-size: 1em;
            border-radius: 5px;
            border: 1px solid #ccc;
        }

        .diary-input textarea::placeholder {
            color: #666;
            font-style: italic;
        }

        .diary-list-item {
            padding: 10px;
            margin-top: 5px;
            background-color: #f1f1f1;
            border-radius: 5px;
        }

        .progress-status {
            font-size: 1em;
            color: var(--primary-color);
            margin-bottom: 20px;
            text-align: right;
        }

        /* 반응형 디자인 */
        @media (max-width: 768px) {
            body {
                font-size: 16px;
            }

            .header {
                font-size: 1.3em;
            }

            button {
                font-size: 14px;
                padding: 8px 16px;
            }
        }

        @media (max-width: 480px) {
            body {
                font-size: 14px;
            }

            .header {
                font-size: 1.2em;
            }

            button {
                font-size: 12px;
                padding: 6px 14px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <span>이별 후 회복 기간 예측하기</span>
            <button type="button" class="dark-mode-toggle" onclick="toggleDarkMode()">🌙 다크 모드</button>
        </div>

        <!-- 진행 상태 표시기 -->
        <div class="progress-bar">
            <div class="progress" id="progress"></div>
        </div>

        <!-- 진행 상황 텍스트 -->
        <div id="progressStatus" class="progress-status">질문 1/18</div>

        <!-- 설문 폼 -->
        <form id="surveyForm">
            <!-- 질문들이 동적으로 추가될 위치 -->
            <div id="questionsContainer"></div>

            <!-- 다음 버튼 -->
            <button type="button" id="nextButton" onclick="showNextQuestion()">다음</button>
        </form>

        <!-- 결과 및 조언 표시 -->
        <div id="result" class="result"></div>
        <div id="advice" class="advice"></div>
        <div id="plan" class="plan"></div>
        <div id="playlist" class="playlist"></div>

        <!-- 재회 확률 계산 섹션 -->
        <div id="reunionSection" style="display:none;">
            <h3>재회 확률을 계산해 보세요</h3>

            <form id="reunionForm">
                <!-- 재회 관련 질문들 -->
                <fieldset class="question">
                    <legend>헤어진 지 얼마나 되었나요?</legend>
                    <label><input type="radio" name="q1" value="10"> 1개월 이하</label><br>
                    <label><input type="radio" name="q1" value="20"> 1개월 이상 ~ 3달 이하</label><br>
                    <label><input type="radio" name="q1" value="30"> 3개월 이상 ~ 6개월 이하</label><br>
                    <label><input type="radio" name="q1" value="40"> 6개월 이상 ~ 1년 이하</label><br>
                    <label><input type="radio" name="q1" value="50"> 1년 이상</label>
                </fieldset>

                <fieldset class="question">
                    <legend>헤어지는 순간, 나는 어떻게 행동했나요?</legend>
                    <label><input type="radio" name="q2" value="50"> 헤어질 생각 없다면서 고집을 부렸다.</label><br>
                    <label><input type="radio" name="q2" value="40"> 미련이 남도록 잘 하겠다며 붙잡았다.</label><br>
                    <label><input type="radio" name="q2" value="30"> 왜 우리가 헤어지면 안되는지 조목조목 따졌다.</label><br>
                    <label><input type="radio" name="q2" value="20"> 알겠다면서 담담하게 침묵했다.</label><br>
                    <label><input type="radio" name="q2" value="10"> 쿨한 척 알겠다며 돌아섰다.</label><br>
                    <label><input type="radio" name="q2" value="0"> 나도 이제 만날 생각 없다고 얘기해주었다.</label>
                </fieldset>

                <fieldset class="question">
                    <legend>잘 할 수 있다고 계속 설득해보기</legend>
                    <label><input type="checkbox" name="q3" value="20"> 잘 할 수 있다고 계속 설득해보기</label><br>
                    <label><input type="checkbox" name="q3" value="15"> 내 마음을 담은 장문톡 보내기</label><br>
                    <label><input type="checkbox" name="q3" value="10"> 집 앞에 찾아가기</label><br>
                    <label><input type="checkbox" name="q3" value="10"> 부재중 전화 남기기</label><br>
                    <label><input type="checkbox" name="q3" value="5"> 몰래 상대방의 근황을 뒷조사</label><br>
                    <label><input type="checkbox" name="q3" value="0"> 아무 것도 안함</label>
                </fieldset>

                <fieldset class="question">
                    <legend>헤어진 후, 얼마나 연락을 주고 받았나요?</legend>
                    <label><input type="radio" name="q4" value="0"> 없음</label><br>
                    <label><input type="radio" name="q4" value="10"> 1번</label><br>
                    <label><input type="radio" name="q4" value="20"> 3번</label><br>
                    <label><input type="radio" name="q4" value="30"> 5번</label>
                </fieldset>

                <fieldset class="question">
                    <legend>둘의 기억이 남아있는 장소가 몇 곳이 있나요?</legend>
                    <label><input type="radio" name="q5" value="10"> 2 곳 이하</label><br>
                    <label><input type="radio" name="q5" value="20"> 5 곳 이하</label><br>
                    <label><input type="radio" name="q5" value="30"> 10 곳 이하</label><br>
                    <label><input type="radio" name="q5" value="40"> 10 곳 이상</label>
                </fieldset>

                <fieldset class="question">
                    <legend>서로에게 남아있는 연결점은?</legend>
                    <label><input type="checkbox" name="q6" value="10"> 카카오톡 친구</label><br>
                    <label><input type="checkbox" name="q6" value="10"> SNS 팔로우 상태</label><br>
                    <label><input type="checkbox" name="q6" value="20"> 같은 직장, 학교에 있음</label><br>
                    <label><input type="checkbox" name="q6" value="15"> 같은 모임, 단톡방이 있음</label><br>
                    <label><input type="checkbox" name="q6" value="10"> 가까운 곳에 살고 있음 (직장 포함)</label><br>
                    <label><input type="checkbox" name="q6" value="5"> 겹치는 단골 식당, 단골 매장이 있음</label><br>
                    <label><input type="checkbox" name="q6" value="5"> 갚아야 할 돈 or 돌려줄 물건이 있음</label>
                </fieldset>

                <fieldset class="question">
                    <legend>둘 사이에 아는 지인은 몇 명인가요? (연락 가능)</legend>
                    <label><input type="radio" name="q7" value="0"> 없음</label><br>
                    <label><input type="radio" name="q7" value="10"> 1명</label><br>
                    <label><input type="radio" name="q7" value="20"> 2명</label><br>
                    <label><input type="radio" name="q7" value="30"> 3명</label><br>
                    <label><input type="radio" name="q7" value="40"> 5명 이상</label>
                </fieldset>

                <fieldset class="question">
                    <legend>상대의 현재 상황은 어떤가요? (연애 제외)</legend>
                    <label><input type="radio" name="q8" value="10"> 일 때문에 바쁘다.</label><br>
                    <label><input type="radio" name="q8" value="20"> 어떤 이유로 힘든 시기를 보내고 있다.</label><br>
                    <label><input type="radio" name="q8" value="20"> 자기 삶을 즐기고 있다.</label><br>
                    <label><input type="radio" name="q8" value="15"> 헤어지기 전과 똑같이 살고 있다.</label><br>
                    <label><input type="radio" name="q8" value="10"> 잘 모르겠다.</label>
                </fieldset>

                <fieldset class="question">
                    <legend>헤어진 이후, 내 삶이 얼마나 변했나요?</legend>
                    <label><input type="radio" name="q9" value="30"> 슬프긴 하지만, 헤어지기 전과 크게 차이가 없다.</label><br>
                    <label><input type="radio" name="q9" value="40"> 일도 손에 안잡히고, 힘들어서 아무 것도 하지 않았다.(술,폭식,거식,불면증,무기력 등)</label><br>
                    <label><input type="radio" name="q9" value="20"> 슬픈 마음을 달래기 위해, 쉬면서 힐링하는데 집중했다.</label><br>
                    <label><input type="radio" name="q9" value="10"> 그 사람이 생각나지 않도록, 새로운 활동을 시작했다. (일, 여행, 모임, 운동 등)</label><br>
                    <label><input type="radio" name="q9" value="0"> 어차피 헤어진 거, 새로운 사람을 실컷 만났다. (소개팅, 썸)</label>
                </fieldset>

                <fieldset class="question">
                    <legend>헤어진 이후 내 카톡 프로필, SNS 상태는?</legend>
                    <label><input type="radio" name="q10" value="20"> 모든 사진 비공개</label><br>
                    <label><input type="radio" name="q10" value="30"> 보란 듯이 잘 사는 모습 과시</label><br>
                    <label><input type="radio" name="q10" value="20"> 가끔 근황만 올리기</label><br>
                    <label><input type="radio" name="q10" value="20"> 다른 이성과 같이 있을 것 같은 사진을 올림</label><br>
                    <label><input type="radio" name="q10" value="15"> 셀카를 자주 업뎃</label><br>
                    <label><input type="radio" name="q10" value="15"> 힘든 티를 냄 (슬픈 노래, 감성 글귀 등)</label><br>
                    <label><input type="radio" name="q10" value="0"> 새로 올린 사진 없음</label><br>
                    <label><input type="radio" name="q10" value="10"> 일부러 나랑 관련없는 사진만 올림</label>
                </fieldset>

                <fieldset class="question">
                    <legend>연락할 때, 애정표현을 해본 적 있나요?</legend>
                    <label><input type="radio" name="q11" value="30"> 항상 내 마음을 표현했음</label><br>
                    <label><input type="radio" name="q11" value="20"> 가끔 분위기 좋을 때 했음</label><br>
                    <label><input type="radio" name="q11" value="10"> 최대한 자제함</label><br>
                    <label><input type="radio" name="q11" value="0"> 할 만한 상황이 온 적 없음</label>
                </fieldset>

                <fieldset class="question">
                    <legend>연락할 때 '헤어진 당시의 상황'을 다시 얘기한 적 있나요?</legend>
                    <label><input type="radio" name="q12" value="30"> 연락할 때마다 얘기를 꺼냈음</label><br>
                    <label><input type="radio" name="q12" value="20"> 대화 중 2번 이상 얘기한 적 있음</label><br>
                    <label><input type="radio" name="q12" value="10"> 선톡으로 얘기를 꺼내 본 적 있음</label><br>
                    <label><input type="radio" name="q12" value="0"> 최대한 자제 중</label>
                </fieldset>

                <fieldset class="question">
                    <legend>연락할 때, 재회 이야기를 꺼낸 적 있나요?</legend>
                    <label><input type="radio" name="q13" value="30"> 연락할 때마다 얘기함</label><br>
                    <label><input type="radio" name="q13" value="20"> 떠보듯이 얘기한 적 있음</label><br>
                    <label><input type="radio" name="q13" value="10"> 대화는 했지만, 차마 꺼내지 못함</label><br>
                    <label><input type="radio" name="q13" value="0"> 재회 얘기없이 은근한 관심만 표현</label>
                </fieldset>

                <fieldset class="question">
                    <legend>연락 마무리를 누가 더 많이 했나요?</legend>
                    <label><input type="radio" name="q14" value="30"> 항상 상대가 먼저</label><br>
                    <label><input type="radio" name="q14" value="20"> 상대가 한 적이 좀 더 많음</label><br>
                    <label><input type="radio" name="q14" value="10"> 내가 한 적이 더 많음</label><br>
                    <label><input type="radio" name="q14" value="0"> 항상 내가 먼저</label>
                </fieldset>

                <fieldset class="question">
                    <legend>연락을 무시 당했을 때 나의 대처는?</legend>
                    <label><input type="radio" name="q15" value="10"> 한번 더 톡을 보낸다.</label><br>
                    <label><input type="radio" name="q15" value="20"> 연락을 무시하는 이유를 묻는다.</label><br>
                    <label><input type="radio" name="q15" value="0"> 더 이상 아무 것도 하지 않는다.</label><br>
                    <label><input type="radio" name="q15" value="15"> 며칠 있다 다른 얘기로 연락해본다.</label>
                </fieldset>

                <fieldset class="question">
                    <legend>연락했을 때 상대의 '긍정적인' 반응?</legend>
                    <label><input type="checkbox" name="q16" value="10"> 내 질문에 성실하게 대답</label><br>
                    <label><input type="checkbox" name="q16" value="10"> 긍정적인(친절or친근) 말투</label><br>
                    <label><input type="checkbox" name="q16" value="15"> 묻지도 않은 이야기를 꺼냄</label><br>
                    <label><input type="checkbox" name="q16" value="15"> 종종 즉각적으로 답장이 옴</label><br>
                    <label><input type="checkbox" name="q16" value="10"> 나의 근황에 대해 먼저 물어봄</label><br>
                    <label><input type="checkbox" name="q16" value="10"> 나의 근황을 알고 있음</label><br>
                    <label><input type="checkbox" name="q16" value="15"> 다시 만나 이야기 할 수 있음을 암시</label><br>
                    <label><input type="checkbox" name="q16" value="15"> 다시 사귈 수 있음을 암시</label>
                </fieldset>

                <fieldset class="question">
                    <legend>연락했을 때 상대의 '부정적인' 반응?</legend>
                    <label><input type="checkbox" name="q17" value="0"> 연락하지 말아달라고 함</label><br>
                    <label><input type="checkbox" name="q17" value="5"> 답장은 오지만 단답</label><br>
                    <label><input type="checkbox" name="q17" value="10"> 답장은 오지만 경계하는 말투</label><br>
                    <label><input type="checkbox" name="q17" value="10"> 10시간 넘는 답장 텀, 3번 이상</label><br>
                    <label><input type="checkbox" name="q17" value="0"> 연애 때와 달리 읽씹, 안읽씹을 자주 함</label><br>
                    <label><input type="checkbox" name="q17" value="0"> 나를 원망하고 화를 냄</label><br>
                    <label><input type="checkbox" name="q17" value="10"> 답장을 늦게 한 것에 변명 함</label><br>
                    <label><input type="checkbox" name="q17" value="10"> 이별 당시 상황에 대해 얘기를 함</label>
                </fieldset>

                <button type="button" onclick="showNextReunionQuestion()">다음</button>
            </form>

            <div id="reunionResult" class="result"></div>
            <div id="reunionAdvice" class="advice"></div>
        </div>

        <!-- 추가 리소스 제공 -->
        <div id="resources" class="resources">
            <h3>더 많은 정보</h3>
            <ul>
                <li><a href="https://example.com/mental-health" target="_blank">정신 건강을 위한 10가지 조언</a></li>
                <li><a href="https://example.com/books" target="_blank">이별 후 회복을 돕는 책 목록</a></li>
                <li><a href="tel:010-9299-9928">전문 상담 서비스 알아보기</a></li>
            </ul>
        </div>

        <!-- 디스클레임(면책 조항) -->
        <div class="disclaimer">
            이 설문은 심리학적 연구에 기반하여 구성되었으며, 김수현 박사의 검증을 받았습니다.
        </div>
    </div>

    <script>
        let currentQuestionIndex = 0;
        let currentReunionQuestionIndex = 0;

        // 다크 모드 토글
        function toggleDarkMode() {
            document.body.classList.toggle('dark-mode');
        }

        // 설문 문항을 동적으로 생성
        document.addEventListener("DOMContentLoaded", function () {
            const form = document.getElementById("surveyForm");

            const questions = [
                {
                    legend: "관계의 길이는 얼마나 되었나요?",
                    options: [
                        { value: "10", label: "1년 미만" },
                        { value: "20", label: "1-3년" },
                        { value: "30", label: "3년 이상" },
                    ],
                },
                {
                    legend: "이별의 충격은 얼마나 컸나요?",
                    options: [
                        { value: "30", label: "매우 컸다" },
                        { value: "20", label: "보통" },
                        { value: "10", label: "별로 충격적이지 않았다" },
                    ],
                },
                {
                    legend: "현재 감정 상태를 어떻게 표현하시겠어요?",
                    options: [
                        { value: "50", label: "매우 슬프다" },
                        { value: "40", label: "다소 슬프다" },
                        { value: "20", label: "평온하다" },
                        { value: "10", label: "다소 행복하다" },
                        { value: "0", label: "매우 행복하다" },
                    ],
                },
                {
                    legend: "이별 후 새로운 활동이나 취미를 시작했나요?",
                    options: [
                        { value: "10", label: "예, 여러 가지 새로운 활동을 시작했다" },
                        { value: "20", label: "예, 몇 가지 새로운 활동을 시작했다" },
                        { value: "30", label: "아니요, 기존 활동만 유지하고 있다" },
                        { value: "40", label: "아니요, 아무런 활동도 하지 않았다" },
                    ],
                },
                {
                    legend: "이별 후 수면 패턴은 어떻게 변했나요?",
                    options: [
                        { value: "40", label: "불면증이 심해졌다" },
                        { value: "30", label: "평소보다 덜 잔다" },
                        { value: "20", label: "평소와 비슷하다" },
                        { value: "10", label: "평소보다 더 많이 잔다" },
                    ],
                },
                {
                    legend: "이별 전후의 자기 인식은 어떻게 달라졌나요?",
                    options: [
                        { value: "50", label: "자신감이 많이 떨어졌다" },
                        { value: "30", label: "약간 떨어졌다" },
                        { value: "10", label: "거의 변하지 않았다" },
                        { value: "0", label: "오히려 자신감이 증가했다" },
                    ],
                },
                {
                    legend: "이별 후 주변 사람들로부터 어떤 도움을 받고 있나요?",
                    options: [
                        { value: "10", label: "친구나 가족의 도움을 많이 받고 있다" },
                        { value: "20", label: "보통이다" },
                        { value: "30", label: "도움을 거의 받지 못하고 있다" },
                    ],
                },
                {
                    legend: "미래의 관계에 대한 기대감은 어떤가요?",
                    options: [
                        { value: "0", label: "매우 긍정적이다" },
                        { value: "10", label: "다소 긍정적이다" },
                        { value: "30", label: "보통이다" },
                        { value: "50", label: "미래가 두렵다" },
                    ],
                },
                {
                    legend: "이별 후 생활 습관은 어떻게 변했나요?",
                    options: [
                        { value: "40", label: "건강하지 않은 습관이 생겼다" },
                        { value: "30", label: "평소보다 나빠졌다" },
                        { value: "20", label: "변함없다" },
                        { value: "10", label: "건강한 습관을 유지하고 있다" },
                        { value: "0", label: "건강한 습관을 새로 형성했다" },
                    ],
                },
            ];

            const questionsContainer = document.getElementById("questionsContainer");

            questions.forEach((question, index) => {
                const fieldset = document.createElement("fieldset");
                fieldset.className = "question";
                if (index === 0) fieldset.classList.add("active"); // 첫 번째 질문만 활성화

                const legend = document.createElement("legend");
                legend.textContent = question.legend;
                fieldset.appendChild(legend);

                question.options.forEach((option) => {
                    const label = document.createElement("label");
                    const input = document.createElement("input");
                    input.type = "radio";
                    input.name = "q" + (index + 1);
                    input.value = option.value;
                    label.appendChild(input);
                    label.appendChild(document.createTextNode(" " + option.label));
                    fieldset.appendChild(label);
                    fieldset.appendChild(document.createElement("br"));
                });

                questionsContainer.appendChild(fieldset);
            });

            // 폼이 동적으로 추가된 후 진행 바도 업데이트
            updateProgressBar();
        });

        // 다음 질문 표시
        function showNextQuestion() {
            const questions = document.querySelectorAll('.question');
            const currentQuestion = questions[currentQuestionIndex];

            // 선택이 안된 경우 알림
            if (!currentQuestion.querySelector('input[type="radio"]:checked')) {
                alert("질문에 답변을 선택해주세요.");
                return;
            }

            // 현재 질문 숨기고 다음 질문 표시
            currentQuestion.classList.remove('active');
            currentQuestionIndex++;

            if (currentQuestionIndex < questions.length) {
                questions[currentQuestionIndex].classList.add('active');
                updateProgressBar();
            } else {
                document.getElementById("nextButton").style.display = 'none';
                calculateTime();
                showReunionSection(); // 재회 확률 계산 시작
            }
        }

        // 재회 설문 다음 질문 표시
        function showNextReunionQuestion() {
            const questions = document.querySelectorAll('#reunionForm .question');
            const currentQuestion = questions[currentReunionQuestionIndex];

            // 선택이 안된 경우 알림
            if (!currentQuestion.querySelector('input[type="radio"]:checked') && !currentQuestion.querySelector('input[type="checkbox"]:checked')) {
                alert("질문에 답변을 선택해주세요.");
                return;
            }

            // 현재 질문 숨기고 다음 질문 표시
            currentQuestion.classList.remove('active');
            currentReunionQuestionIndex++;

            if (currentReunionQuestionIndex < questions.length) {
                questions[currentReunionQuestionIndex].classList.add('active');
            } else {
                calculateReunion();
            }
        }

        // 결과 계산
        function calculateTime() {
            const form = document.forms['surveyForm'];
            const score = calculateScore(form);

            const timeToForget = getTimeToForget(score);
            document.getElementById('result').innerText = `잊는데 예상되는 시간: ${timeToForget}`;

            const advice = getAdvice(score, form);
            document.getElementById('advice').innerText = advice;

            const plan = getRecoveryPlan(score);
            document.getElementById('plan').innerText = plan;

            const playlist = getPlaylist(score);
            document.getElementById('playlist').innerHTML = playlist;
        }

        // 점수 계산
        function calculateScore(form) {
            let score = 0;
            for (let i = 1; i <= 18; i++) {  // 여전히 최대 18개의 질문에 대한 점수를 계산
                const question = form['q' + i];
                if (question) {
                    score += getSelectedValue(question);
                }
            }
            return score;
        }

        // 선택된 값 가져오기
        function getSelectedValue(question) {
            let selectedValue = 0;
            if (question.length) {
                for (const option of question) {
                    if (option.checked) {
                        selectedValue = parseInt(option.value);
                        break;
                    }
                }
            } else if (question.checked) {
                selectedValue = parseInt(question.value);
            }
            return selectedValue;
        }

        // 잊는 시간 계산
        function getTimeToForget(score) {
            if (score <= 150) {
                return "1개월 미만";
            } else if (score <= 300) {
                return "1-3개월";
            } else if (score <= 450) {
                return "3-6개월";
            } else {
                return "6개월 이상";
            }
        }

        // 조언 제공
        function getAdvice(score, form) {
            let advice = "";

            if(score > 300 && parseInt(form['q3'].value) >= 40) {
                advice += "감정이 힘든 상태입니다. 가까운 친구나 가족과 감정을 나누고, 도움이 필요하면 전문가와 상담해보세요.\n";
            }
            if(score > 200 && parseInt(form['q4'].value) >= 30) {
                advice += "새로운 활동이나 취미를 시작해보세요. 이것이 회복 과정에 큰 도움이 될 수 있습니다.\n";
            }
            if(parseInt(form['q5'].value) >= 30) {
                advice += "수면 패턴이 변했다면, 충분한 휴식과 규칙적인 생활 패턴을 유지하려고 노력해보세요.";
            }

            return advice;
        }

        // 개인화된 회복 계획 제공
        function getRecoveryPlan(score) {
            let plan = "추천 회복 계획: \n";

            if (score > 400) {
                plan += "- 매일 10분씩 명상하기\n";
                plan += "- 매일 30분 산책\n";
                plan += "- 친구나 가족과 자주 연락하기\n";
            } else if (score > 300) {
                plan += "- 새로운 취미를 시작하세요 (예: 요가, 독서, 그림 그리기)\n";
                plan += "- 주기적으로 감정을 기록하세요\n";
            } else {
                plan += "- 자기 계발에 집중하세요 (예: 온라인 강좌, 운동)\n";
                plan += "- 긍정적인 자기 대화를 시도하세요\n";
            }

            return plan;
        }

        // 감정에 맞는 음악/명상 추천
        function getPlaylist(score) {
            let playlist = "<h3>추천 음악/명상</h3><ul>";

            if (score > 400) {
                playlist += '<li><a href="https://www.youtube.com/watch?v=2OEL4P1Rz04" target="_blank">편안한 명상 음악</a></li>';
                playlist += '<li><a href="https://www.youtube.com/watch?v=hnpQrMqDoqE" target="_blank">명상 가이드</a></li>';
            } else if (score > 300) {
                playlist += '<li><a href="https://www.youtube.com/watch?v=Y8Wp3D44x0M" target="_blank">기분 전환을 위한 음악</a></li>';
                playlist += '<li><a href="https://www.youtube.com/watch?v=5qap5aO4i9A" target="_blank">편안한 로파이 힙합</a></li>';
            } else {
                playlist += '<li><a href="https://www.youtube.com/watch?v=8Qn_spdM5Zg" target="_blank">활기찬 팝 음악</a></li>';
                playlist += '<li><a href="https://www.youtube.com/watch?v=Fp8msa5uYsc" target="_blank">긍정적인 아침 음악</a></li>';
            }

            playlist += "</ul>";
            return playlist;
        }

        // 감정 일기 저장
        function saveDiary() {
            const diaryText = document.getElementById('diaryText').value;
            if (diaryText) {
                const diaryList = document.getElementById('diaryList');
                const newEntry = document.createElement('li');
                newEntry.innerText = `${new Date().toLocaleDateString()}: ${diaryText}`;
                newEntry.classList.add('diary-list-item');
                diaryList.appendChild(newEntry);
                document.getElementById('diaryText').value = '';  // 입력 초기화

                saveDiaryToLocalStorage(newEntry.inner
