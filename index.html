<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>이별 후 회복 기간 예측하기</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;700&family=Dancing+Script:wght@400;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Playfair Display', serif;
            margin: 20px;
            background-color: #f7f9fc;
            color: #333;
            font-size: 18px;
        }
        .container {
            max-width: 600px;
            margin: auto;
            background-color: #fff;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0px 4px 15px rgba(0, 0, 0, 0.1);
        }
        .header {
            font-family: 'Dancing Script', cursive;
            background-color: #4a90e2;
            color: white;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 30px;
            font-size: 2em;
            text-align: center;
        }
        .question {
            display: none; /* 처음에는 모든 질문 숨김 */
            margin-bottom: 20px;
            text-align: left;
        }
        .question.active {
            display: block; /* 현재 질문만 표시 */
        }
        .question label {
            font-weight: bold;
            display: block;
            margin-bottom: 10px;
            font-size: 1.2em;
        }
        .result, .advice, .plan, .playlist, .guide {
            margin-top: 30px;
            font-weight: bold;
            font-size: 1.3em;
            text-align: left;
            font-family: 'Playfair Display', serif;
        }
        .advice {
            color: #28a745;
        }
        .resources, .emotion-diary {
            margin-top: 30px;
            text-align: left;
        }
        .resources h3, .emotion-diary h3 {
            color: #4a90e2;
            font-weight: bold;
            font-size: 1.2em;
            font-family: 'Dancing Script', cursive;
        }
        button {
            padding: 12px 24px;
            font-size: 16px;
            cursor: pointer;
            background-color: #4a90e2;
            color: white;
            border: none;
            border-radius: 5px;
            box-shadow: 0px 4px 8px rgba(0, 0, 0, 0.1);
            transition: background-color 0.3s ease, box-shadow 0.3s ease;
            font-family: 'Playfair Display', serif;
        }
        button:hover {
            background-color: #357ABD;
            box-shadow: 0px 6px 12px rgba(0, 0, 0, 0.15);
        }
        .disclaimer {
            margin-top: 20px;
            font-size: 0.9em;
            color: #555;
            text-align: center;
            font-family: 'Playfair Display', serif;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            이별 후 회복 기간 예측하기
        </div>

        <!-- 설문 폼 -->
        <form id="surveyForm">
            <fieldset class="question active">
                <legend>관계의 길이는 얼마나 되었나요?</legend>
                <input type="radio" name="q1" value="10" onclick="showNextQuestion()"> 1년 미만<br>
                <input type="radio" name="q1" value="20" onclick="showNextQuestion()"> 1-3년<br>
                <input type="radio" name="q1" value="30" onclick="showNextQuestion()"> 3년 이상
            </fieldset>

            <fieldset class="question">
                <legend>이별의 충격은 얼마나 컸나요?</legend>
                <input type="radio" name="q2" value="30" onclick="showNextQuestion()"> 매우 컸다<br>
                <input type="radio" name="q2" value="20" onclick="showNextQuestion()"> 보통<br>
                <input type="radio" name="q2" value="10" onclick="showNextQuestion()"> 별로 충격적이지 않았다
            </fieldset>

            <fieldset class="question">
                <legend>현재 감정 상태를 어떻게 표현하시겠어요?</legend>
                <input type="radio" name="q6" value="50" onclick="showNextQuestion()"> 매우 슬프다<br>
                <input type="radio" name="q6" value="40" onclick="showNextQuestion()"> 다소 슬프다<br>
                <input type="radio" name="q6" value="20" onclick="showNextQuestion()"> 평온하다<br>
                <input type="radio" name="q6" value="10" onclick="showNextQuestion()"> 다소 행복하다<br>
                <input type="radio" name="q6" value="0" onclick="showNextQuestion()"> 매우 행복하다
            </fieldset>

            <fieldset class="question">
                <legend>이별 후 새로운 활동이나 취미를 시작했나요?</legend>
                <input type="radio" name="q8" value="10" onclick="showNextQuestion()"> 예, 여러 가지 새로운 활동을 시작했다<br>
                <input type="radio" name="q8" value="20" onclick="showNextQuestion()"> 예, 몇 가지 새로운 활동을 시작했다<br>
                <input type="radio" name="q8" value="30" onclick="showNextQuestion()"> 아니요, 기존 활동만 유지하고 있다<br>
                <input type="radio" name="q8" value="40" onclick="showNextQuestion()"> 아니요, 아무런 활동도 하지 않았다
            </fieldset>

            <fieldset class="question">
                <legend>이별 후 수면 패턴은 어떻게 변했나요?</legend>
                <input type="radio" name="q9" value="40" onclick="showNextQuestion()"> 불면증이 심해졌다<br>
                <input type="radio" name="q9" value="30" onclick="showNextQuestion()"> 평소보다 덜 잔다<br>
                <input type="radio" name="q9" value="20" onclick="showNextQuestion()"> 평소와 비슷하다<br>
                <input type="radio" name="q9" value="10" onclick="showNextQuestion()"> 평소보다 더 많이 잔다
            </fieldset>

            <button type="button" id="showResultButton" onclick="calculateTime()" style="display:none;">결과 보기</button>
        </form>

        <!-- 결과 및 조언 표시 -->
        <div id="result" class="result"></div>
        <div id="advice" class="advice"></div>
        <div id="plan" class="plan"></div>
        <div id="playlist" class="playlist"></div>
    </div>

    <script>
        // 다음 질문을 표시하는 함수
        function showNextQuestion() {
            const currentQuestion = document.querySelector('.question.active');
            const nextQuestion = currentQuestion.nextElementSibling;

            if (nextQuestion && nextQuestion.classList.contains('question')) {
                currentQuestion.classList.remove('active');
                nextQuestion.classList.add('active');
            } else {
                document.getElementById('showResultButton').style.display = 'block';
            }
        }

        // 결과 계산
        function calculateTime() {
            const form = document.forms['surveyForm'];
            const score = calculateScore(form);

            const timeToForget = getTimeToForget(score);
            document.getElementById('result').innerText = `잊는데 예상되는 시간: ${timeToForget}`;

            const advice = getAdvice(score, form);
            document.getElementById('advice').innerText = advice;

            const plan = getRecoveryPlan(score);
            document.getElementById('plan').innerText = plan;

            const playlist = getPlaylist(score);
            document.getElementById('playlist').innerHTML = playlist;
        }

        // 점수 계산
        function calculateScore(form) {
            let score = 0;
            for (let i = 1; i <= 18; i++) {
                const question = form['q' + i];
                if (question) {
                    score += getSelectedValue(question);
                }
            }
            return score;
        }

        // 선택된 값 가져오기
        function getSelectedValue(question) {
            let selectedValue = 0;
            if (question.length) {
                for (const option of question) {
                    if (option.checked) {
                        selectedValue = parseInt(option.value);
                        break;
                    }
                }
            } else if (question.checked) {
                selectedValue = parseInt(question.value);
            }
            return selectedValue;
        }

        // 잊는 시간 계산
        function getTimeToForget(score) {
            if (score <= 150) {
                return "1개월 미만";
            } else if (score <= 300) {
                return "1-3개월";
            } else if (score <= 450) {
                return "3-6개월";
            } else {
                return "6개월 이상";
            }
        }

        // 조언 제공
        function getAdvice(score, form) {
            let advice = "";

            if(score > 300 && parseInt(form['q6'].value) >= 40) {
                advice += "감정이 힘든 상태입니다. 가까운 친구나 가족과 감정을 나누고, 도움이 필요하면 전문가와 상담해보세요.\n";
            }
            if(score > 200 && parseInt(form['q8'].value) >= 30) {
                advice += "새로운 활동이나 취미를 시작해보세요. 이것이 회복 과정에 큰 도움이 될 수 있습니다.\n";
            }
            if(parseInt(form['q9'].value) >= 30) {
                advice += "수면 패턴이 변했다면, 충분한 휴식과 규칙적인 생활 패턴을 유지하려고 노력해보세요.";
            }

            return advice;
        }

        // 개인화된 회복 계획 제공
        function getRecoveryPlan(score) {
            let plan = "추천 회복 계획: \n";

            if (score > 400) {
                plan += "- 매일 10분씩 명상하기\n";
                plan += "- 매일 30분 산책\n";
                plan += "- 친구나 가족과 자주 연락하기\n";
            } else if (score > 300) {
                plan += "- 새로운 취미를 시작하세요 (예: 요가, 독서, 그림 그리기)\n";
                plan += "- 주기적으로 감정을 기록하세요\n";
            } else {
                plan += "- 자기 계발에 집중하세요 (예: 온라인 강좌, 운동)\n";
                plan += "- 긍정적인 자기 대화를 시도하세요\n";
            }

            return plan;
        }

        // 감정에 맞는 음악/명상 추천
        function getPlaylist(score) {
            let playlist = "<h3>추천 음악/명상</h3><ul>";

            if (score > 400) {
                playlist += '<li><a href="https://www.youtube.com/watch?v=2OEL4P1Rz04" target="_blank">편안한 명상 음악</a></li>';
                playlist += '<li><a href="https://www.youtube.com/watch?v=hnpQrMqDoqE" target="_blank">명상 가이드</a></li>';
            } else if (score > 300) {
                playlist += '<li><a href="https://www.youtube.com/watch?v=Y8Wp3D44x0M" target="_blank">기분 전환을 위한 음악</a></li>';
                playlist += '<li><a href="https://www.youtube.com/watch?v=5qap5aO4i9A" target="_blank">편안한 로파이 힙합</a></li>';
            } else {
                playlist += '<li><a href="https://www.youtube.com/watch?v=8Qn_spdM5Zg" target="_blank">활기찬 팝 음악</a></li>';
                playlist += '<li><a href="https://www.youtube.com/watch?v=Fp8msa5uYsc" target="_blank">긍정적인 아침 음악</a></li>';
            }

            playlist += "</ul>";
            return playlist;
        }
    </script>
</body>
</html>
